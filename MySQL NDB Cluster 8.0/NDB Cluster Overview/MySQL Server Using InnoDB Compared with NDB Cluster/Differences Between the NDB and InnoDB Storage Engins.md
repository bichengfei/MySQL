# 23.2.6.1 NDB 和 InnoDB 存储引擎对区别

NDB 存储引起是使用分布式、无共享架构实现对，这导致它在许多方面的表现和 InnoDB 不同。对于不习惯使用 NDB 的人来说，由于其在事务、外间、表限制和其它分布式方面的特性，可能出现意外行为。下表列举了一些区别：

| 特征            | InnoDB(MySQL 8.0)                             | NDB 8.0                                                             |
|:-------------:|:---------------------------------------------:|:-------------------------------------------------------------------:|
| MySQL 服务器版本   | 8.0                                           | 8.0                                                                 |
| InnoDB 版本     | InnoDB 8.0.28                                 | InnoDB 8.0.28                                                       |
| NDB 集群版本      | 不适用                                           | NDB 8.0.29/8.0.28                                                   |
| 存储限制          | 64 T                                          | 128 T                                                               |
| 外键            | 是的                                            | 是的                                                                  |
| 事务            | 所有标准类型                                        | read_commited                                                       |
| MVCC          | 是的                                            | 不                                                                   |
| 数据压缩          | 是的                                            | 否（可以压缩 NDB 检查点和备份文件）                                                |
| 大行支持(> 14k)   | 支持varbinary,varchar,blob,text                 | 仅支持 blob 和 text（使用这些类型存储大量数据会降低 NDB 性能）                             |
| 复制支持          | 使用 MySQL Replication 的异步和半同步复制；<br/>MySQL 组复制 | NDB Cluster 内的自动同步复制；<br/>使用 MySQL 复制，NDB 集群之间的异步复制(不支持半同步复制)       |
| 读取操作的横向扩展     | 是（MySQL 复制）                                   | 是（NDB 集群中的自动分区；NDB 集群复制）                                            |
| 写操作的横向扩展      | 需要应用程序级分区（分片）                                 | 是（NDB 集群的自动分区）                                                      |
| 高可用性（HA）      | 内置，来自 InnoDB 集群                               | 是                                                                   |
| 节点故障恢复和故障转移   | 从 MySQL 组复制                                   | 自动                                                                  |
| 节点故障恢复时间      | 30 秒或更长                                       | 通常 < 1 秒                                                            |
| 实时性能          | 不                                             | 是                                                                   |
| 内存表           | 不                                             | 是（某些数据可以选择存储在磁盘上；内存和磁盘数据都是持久的）                                      |
| NoSQL 访问存储引擎  | 是的                                            | 是（多种 API，包括 Memcached、Node.js/JavaScript、Java、JPA、C ++ 和 HTTP/Rest） |
| 并发和并行写入       | 是的                                            | 多达 48 个写入器，针对并发写入进行了优化                                              |
| 冲突检测和解决（多个来源） | 是（MySQL 组复制）                                  | 是                                                                   |
| Hash 索引       | 不                                             | 是                                                                   |
| 在线添加节点        | 使用 MySQL 组复制读/写副本                             | 是（所有类型节点）                                                           |
| 在线升级          | 是（使用复制）                                       | 是的                                                                  |
| 在线模式修改        | 是的，作为 MySQL 8.0 的一部分                          | 是                                                                   |
